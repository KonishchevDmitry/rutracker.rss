#!/usr/bin/env python

"""Shows blacklist rules."""

from __future__ import unicode_literals

import sys

import pycl.main
from pycl.misc import to_system_encoding, to_unicode

from rutracker import blacklist


def main():
    """The script's main function."""

    pycl.main.setup_environment()

    if len(sys.argv) != 1:
        sys.exit("Invalid argument: {arg}\nUsage: {command}".format(
            arg = to_unicode(sys.argv[1]), command = to_unicode(sys.argv[0])))

    for rule in blacklist.find():
        print to_system_encoding("{rule}{regex}".format(
            rule = rule["_id"], regex = " (regex)" if rule.get("regex", False) else ""))


if __name__ == "__main__":
    main()
